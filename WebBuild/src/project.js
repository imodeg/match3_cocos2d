require=function e(t,l,r){function i(a,o){if(!l[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(n)return n(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var h=l[a]={exports:{}};t[a][0].call(h.exports,function(e){var l=t[a][1][e];return i(l||e)},h,h.exports,e,t,l,r)}return l[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({Cell:[function(e,t,l){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"4fb6eMEgU5OlLQsUgXnioZR","Cell");e("GameConstants").gameCfg;var a=function(e){function t(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3],o=arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"block"));if(s.sprite=s.addComponent(cc.Sprite),s.parent=e,s.x=l,s.y=n,s.posX=a,s.posY=o,s.active=!1,c>0){s.active=!0;var h=cc.url.raw("resources/cell1.png");2==c&&(h=cc.url.raw("resources/cell2.png"));var u=cc.textureCache.addImage(h);s.sprite.spriteFrame=new cc.SpriteFrame(u)}return s.anchorX=.5,s.anchorY=.5,s.tile=null,s}return n(t,cc.Node),t}();t.exports.Cell=a,cc._RF.pop()},{GameConstants:"GameConstants"}],GameConstants:[function(e,t,l){"use strict";cc._RF.push(t,"30eb1WBCKZLp4433I8RGbyf","GameConstants");var r={cellSize:62,cellCount:9,turns:12,target:10,moveTime:.3,fallTime:.1};t.exports.gameCfg=r,cc._RF.pop()},{}],Map:[function(e,t,l){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"83cb5S3rH5G2JDOspY4a3p2","Map");var a=function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}}(),o=e("GameConstants").gameCfg,c=e("Cell").Cell,s=e("TileBaseColor").TileBaseColor,h=(e("TileSuperLine").TileSuperLine,function(e){function t(e,l){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"map"));n.parent=e,n.gameComponent=l,n.fieldCfg={},n.fieldCfg.cellSize=o.cellSize,n.fieldCfg.cellSizeHalf=n.fieldCfg.cellSize/2,n.fieldCfg.cellCountX=o.cellCount,n.fieldCfg.cellCountY=o.cellCount,n.fieldCfg.fieldSizeX=n.fieldCfg.cellSize*n.fieldCfg.cellCountX,n.fieldCfg.fieldSizeY=n.fieldCfg.cellSize*n.fieldCfg.cellCountY,n.fieldCfg.fieldSizeXHalf=n.fieldCfg.fieldSizeX/2,n.fieldCfg.fieldSizeYHalf=n.fieldCfg.fieldSizeY/2,n.levelArray=[[2,1,2,1,2,0,0,0,0],[1,2,1,2,1,0,0,0,0],[2,1,2,1,2,0,0,0,0],[1,2,1,2,1,0,0,0,0],[2,1,2,1,2,0,0,0,0],[1,2,1,2,1,2,1,2,1],[2,1,2,1,2,1,2,1,2],[1,2,1,2,1,2,1,2,1],[2,1,2,1,2,1,2,1,2]],n.cellArray=new Array(n.fieldCfg.cellCountX);for(var a=0;a<n.fieldCfg.cellCountX;a++)n.cellArray[a]=new Array(n.fieldCfg.cellCountY);n.turns=o.turns,n.targetTile=o.target,n.createCells(),n.generateTiles(),n.selectBoarder=new cc.Node("selectBoarder"),n.selectBoarder.sprite=n.selectBoarder.addComponent(cc.Sprite),n.selectBoarder.parent=n;var c=cc.url.raw("resources/boarder.png"),s=cc.textureCache.addImage(c);return n.selectBoarder.sprite.spriteFrame=new cc.SpriteFrame(s),n.pressedCell=null,n.selectedCell=null,n.enableInput(),n.timeToEndTurn=0,n}return n(t,cc.Node),a(t,[{key:"createCells",value:function(){for(var e=0;e<this.levelArray.length;e++)for(var t=0;t<this.levelArray[0].length;t++){var l=this.fieldCfg.cellSize*t-this.fieldCfg.fieldSizeXHalf+this.fieldCfg.cellSizeHalf,r=-this.fieldCfg.cellSize*e+this.fieldCfg.fieldSizeXHalf-this.fieldCfg.cellSizeHalf,i=new c(this,l,r,t,e,this.levelArray[e][t]);this.cellArray[t][e]=i}}},{key:"getCellByPoint",value:function(e,t){for(var l=0;l<this.cellArray.length;l++)for(var r=0;r<this.cellArray[0].length;r++)if(this.cellArray[l][r].active){var i=this.cellArray[l][r].getBoundingBoxToWorld();if(e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height)return this.cellArray[l][r]}return null}},{key:"turnInputEnable",value:function(){var e=this,t=this;if(t.turns>0)if(this.timeToEndTurn>0){var l=cc.delayTime(this.timeToEndTurn),r=cc.callFunc(function(){cc.eventManager.removeListeners(t),t.gameComponent.busterButton.enabled=!0,t.enableInput(),e.timeToEndTurn=0},this);this.runAction(cc.sequence(l,r))}else cc.eventManager.removeListeners(t),t.gameComponent.busterButton.enabled=!0,t.enableInput()}},{key:"activeInputBuster",value:function(){cc.eventManager.removeListeners(t),this.gameComponent.busterButton.enabled=!1;var e=this.cellArray,t=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(l){for(var r=Math.floor(l.getLocationX()),i=Math.floor(l.getLocationY()),n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++)if(e[n][a].active){var o=e[n][a].getBoundingBoxToWorld();r>=o.x&&r<=o.x+o.width&&i>=o.y&&i<=o.y+o.height&&null!=e[n][a].tile&&(e[n][a].tile.hit(),t.applyFall())}}},this)}},{key:"enableInput",value:function(){var e=this.cellArray,t=this.selectBoarder,l=this.pressedCell,r=this.selectedCell,i=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(t){for(var r=Math.floor(t.getLocationX()),i=Math.floor(t.getLocationY()),n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++)if(e[n][a].active){var o=e[n][a].getBoundingBoxToWorld();r>=o.x&&r<=o.x+o.width&&i>=o.y&&i<=o.y+o.height&&(l=e[n][a])}},onMouseUp:function(e){var n=Math.floor(e.getLocationX()),a=Math.floor(e.getLocationY());if(null!=l){var o=l.getBoundingBoxToWorld(),c=i.getCellByPoint(n,a);n>=o.x&&n<=o.x+o.width&&a>=o.y&&a<=o.y+o.height?null!=r&&(r.posX==l.posX&&(l.posY==r.posY-1||l.posY==r.posY+1)||r.posY==l.posY&&(l.posX==r.posX-1||l.posX==r.posX+1))?(i.swapCheckTiles(r.posX,r.posY,l.posX,l.posY),l=null,r=null,t.x=-1e3,t.y=-1e3):"line"==l.tile.tileType?(i.reduceTurn(),l.tile.hit(),i.applyFall()):(t.x=l.x,t.y=l.y,r=l,l=null):null!=c&&(c.posX==l.posX&&c.posY<l.posY?(i.swapCheckTiles(l.posX,l.posY,l.posX,l.posY-1),l=null,r=null,t.x=-1e3,t.y=-1e3):c.posX==l.posX&&c.posY>l.posY?(i.swapCheckTiles(l.posX,l.posY,l.posX,l.posY+1),l=null,r=null,t.x=-1e3,t.y=-1e3):c.posY==l.posY&&c.posX<l.posX?(i.swapCheckTiles(l.posX,l.posY,l.posX-1,l.posY),l=null,r=null,t.x=-1e3,t.y=-1e3):c.posY==l.posY&&c.posX>l.posX&&(i.swapCheckTiles(l.posX,l.posY,l.posX+1,l.posY),l=null,r=null,t.x=-1e3,t.y=-1e3))}}},this)}},{key:"generateTiles",value:function(){for(var e=0;e<this.cellArray.length;e++)for(var t=0;t<this.cellArray[0].length;t++)if(this.cellArray[e][t].active){var l=Math.floor(6*Math.random());new s(this,this.cellArray[e][t],l)}this.replaceMatch()}},{key:"replaceMatch",value:function(){var e=null;do{(e=this.findMatch())&&this.replaceOneTile(e.posX,e.posY)}while(0!=e)}},{key:"replaceOneTile",value:function(e,t){var l=[0,1,2,3,4,5];if(e>1&&this.cellArray[e-1][t].active&&this.cellArray[e-1][t].tile){var r=this.cellArray[e-1][t].tile.tileColor;l.splice(l.indexOf(r),1)}if(e<o.cellCount-1&&this.cellArray[e+1][t].active&&this.cellArray[e+1][t].tile){var i=this.cellArray[e+1][t].tile.tileColor;l.splice(l.indexOf(i),1)}if(t>1&&this.cellArray[e][t-1].active&&this.cellArray[e][t-1].tile){var n=this.cellArray[e][t-1].tile.tileColor;l.splice(l.indexOf(n),1)}if(t<o.cellCount-1&&this.cellArray[e][t+1].active&&this.cellArray[e][t+1].tile){var a=this.cellArray[e][t+1].tile.tileColor;l.splice(l.indexOf(a),1)}var c=Math.floor(Math.random()*l.length);this.cellArray[e][t].tile.changeColor(l[c])}},{key:"findMatch",value:function(){for(var e=0;e<this.cellArray.length;e++)for(var t=0;t<this.cellArray[0].length;t++){var l=1;if(1==this.cellArray[t][e].active&&null!=this.cellArray[t][e].tile){for(var r=1;r<this.cellArray.length-t;r++)1==this.cellArray[t+r][e].active&&null!=this.cellArray[t+r][e].tile&&this.cellArray[t][e].tile.tileColor==this.cellArray[t+r][e].tile.tileColor?l++:r=this.cellArray.length-t;if(l>=3){var i={};return i.posX=t,i.posY=e,i.count=l,i.orientation="horizontal",i}}}for(var n=0;n<this.cellArray.length;n++)for(var a=0;a<this.cellArray[0].length;a++){var o=1;if(1==this.cellArray[n][a].active&&null!=this.cellArray[n][a].tile){for(var c=1;c<this.cellArray.length-a;c++)1==this.cellArray[n][a+c].active&&null!=this.cellArray[n][a+c].tile&&this.cellArray[n][a].tile.tileColor==this.cellArray[n][a+c].tile.tileColor?o++:c=this.cellArray.length-a;if(o>=3){var s={};return s.posX=n,s.posY=a,s.count=o,s.orientation="vertical",s}}}return!1}},{key:"findMatchNotHited",value:function(){for(var e=0;e<this.cellArray.length;e++)for(var t=0;t<this.cellArray[0].length;t++){var l=1;if(1==this.cellArray[t][e].active&&null!=this.cellArray[t][e].tile&&0==this.cellArray[t][e].tile.isHitedHorizontal){for(var r=1;r<this.cellArray.length-t;r++)1==this.cellArray[t+r][e].active&&null!=this.cellArray[t+r][e].tile&&this.cellArray[t][e].tile.tileColor==this.cellArray[t+r][e].tile.tileColor?l++:r=this.cellArray.length-t;if(l>=3){var i={};return i.posX=t,i.posY=e,i.count=l,i.orientation="horizontal",i}}}for(var n=0;n<this.cellArray.length;n++)for(var a=0;a<this.cellArray[0].length;a++){var o=1;if(1==this.cellArray[n][a].active&&null!=this.cellArray[n][a].tile&&0==this.cellArray[n][a].tile.isHitedVertical){for(var c=1;c<this.cellArray.length-a;c++)1==this.cellArray[n][a+c].active&&null!=this.cellArray[n][a+c].tile&&this.cellArray[n][a].tile.tileColor==this.cellArray[n][a+c].tile.tileColor?o++:c=this.cellArray.length-a;if(o>=3){var s={};return s.posX=n,s.posY=a,s.count=o,s.orientation="vertical",s}}}return!1}},{key:"swapCheckTiles",value:function(e,t,l,r){var i=this;this.swapTiles(e,t,l,r);var n=cc.delayTime(o.moveTime),a=cc.callFunc(function(){0==i.findMatch()?(i.swapTiles(e,t,l,r),i.timeToEndTurn=o.moveTime,i.turnInputEnable()):(i.reduceTurn(),i.findMatchTurn(),i.applyTileState(),i.applyFall())},this);this.runAction(cc.sequence(n,a)),this.gameComponent.busterButton.enabled=!1,cc.eventManager.removeListeners(this)}},{key:"addTurns",value:function(){this.turns=5,this.turnInputEnable(),this.gameComponent.loseDialog.node.x=4e3,this.gameComponent.turnsCounter.string=this.turns.toString()}},{key:"reduceTurn",value:function(){--this.turns<=0&&(this.turns=0,this.gameComponent.loseDialog.node.x=480,cc.eventManager.removeListeners(this)),this.gameComponent.turnsCounter.string=this.turns.toString()}},{key:"getTargetTile",value:function(){--this.targetTile<=0&&(this.targetTile=0,this.gameComponent.winDialog.node.x=480),this.gameComponent.targetCounter.string=this.targetTile.toString()}},{key:"destroyLine",value:function(e,t,l){if("horizontal"==l)for(var r=0;r<this.cellArray.length;r++)this.cellArray[r][t].active&&null!=this.cellArray[r][t].tile&&this.cellArray[r][t].tile.hit();else if("vertical"==l)for(var i=0;i<this.cellArray.length;i++)this.cellArray[e][i].active&&null!=this.cellArray[e][i].tile&&this.cellArray[e][i].tile.hit()}},{key:"findMatchTurn",value:function(){var e=this.findMatchNotHited();if("horizontal"==e.orientation){for(var t=e.posX;t<e.posX+e.count;t++)this.cellArray[t][e.posY].tile.state="hited",this.cellArray[t][e.posY].tile.isHitedHorizontal=!0;e.count>3&&(this.cellArray[e.posX+2][e.posY].tile.state="convertToSup_vertical")}else if("vertical"==e.orientation){for(var l=e.posY;l<e.posY+e.count;l++)this.cellArray[e.posX][l].tile.state="hited",this.cellArray[e.posX][l].tile.isHitedVertical=!0;e.count>3&&(this.cellArray[e.posX][e.posY+2].tile.state="convertToSup_horizontal")}}},{key:"swapTiles",value:function(e,t,l,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.moveTime,n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(this.cellArray[e][t].active&&this.cellArray[l][r].active){var a=this.cellArray[e][t].tile,c=this.cellArray[l][r].tile;if(this.cellArray[e][t].tile=c,this.cellArray[l][r].tile=a,null!=a){a.cell=this.cellArray[l][r];var s=new cc.MoveTo(i,cc.p(this.cellArray[l][r].x,this.cellArray[l][r].y));n&&s.easing(cc.easeCircleActionInOut()),a.runAction(s)}if(null!=c){c.cell=this.cellArray[e][t];var h=new cc.MoveTo(i,cc.p(this.cellArray[e][t].x,this.cellArray[e][t].y));n&&h.easing(cc.easeCircleActionInOut()),c.runAction(h)}}}},{key:"applyTileState",value:function(){for(var e=!0,t=0;t<this.cellArray.length;t++)for(var l=0;l<this.cellArray[0].length;l++)if(this.cellArray[t][l].active&&null!=this.cellArray[t][l].tile)switch(this.cellArray[t][l].tile.state){case"hited":"line"==this.cellArray[t][l].tile.tileType&&(e=!1),this.cellArray[t][l].tile.hit();break;case"convertToSup_horizontal":this.cellArray[t][l].tile.convertToHorizontal();break;case"convertToSup_vertical":this.cellArray[t][l].tile.convertToVertical()}1!=e&&this.applyTileState()}},{key:"generateNewTiles",value:function(){for(var e=0;e<this.cellArray.length;e++)for(var t=0,l=0;l<this.cellArray[0].length;l++){if(null!=this.cellArray[e][l].tile||1!=this.cellArray[e][l].active||l>=this.cellArray[0].length-1){if(t>0){var r=1;for(l>=this.cellArray[0].length-1&&(r=0),r;r<=l;r++){var i=Math.floor(6*Math.random()),n=new s(this,this.cellArray[e][l-r],i);this.replaceOneTile(e,l-r),n.y=n.y+o.cellSize*l;var a=new cc.MoveTo(o.fallTime*l,cc.p(this.cellArray[e][l-r].x,this.cellArray[e][l-r].y));n.runAction(a)}}break}t++}}},{key:"applyFall",value:function(){var e=this,t=this.fallTiles();if(this.generateNewTiles(),t.falled){var l=cc.delayTime(t.fallTime+.1),r=cc.callFunc(function(){0==e.findMatch()?e.applyFall():(e.findMatchTurn(),e.applyTileState(),e.applyFall())},this);this.runAction(cc.sequence(l,r))}else if(this.fallSkew()){var i=cc.delayTime(o.fallTime+.1),n=cc.callFunc(function(){e.applyFall()},this);this.runAction(cc.sequence(i,n))}0==t.falled&&this.turnInputEnable()}},{key:"fallSkew",value:function(){for(var e=!1,t=0;t<this.cellArray.length&&!e;t++)for(var l=this.cellArray[0].length-1;l>=1&&!e;l--)if(this.cellArray[t][l].active&&null==this.cellArray[t][l].tile)if(Math.floor(10*Math.random())>5){if(t-1>=0&&null!=this.cellArray[t-1][l-1].tile){e=!0,this.swapTiles(t,l,t-1,l-1,o.fallTime,!1);break}if(t+1<this.cellArray.length&&null!=this.cellArray[t+1][l-1].tile){e=!0,this.swapTiles(t,l,t+1,l-1,o.fallTime,!1);break}}else{if(t+1<this.cellArray.length&&null!=this.cellArray[t+1][l-1].tile){e=!0,this.swapTiles(t,l,t+1,l-1,o.fallTime,!1);break}if(t-1>=0&&null!=this.cellArray[t-1][l-1].tile){e=!0,this.swapTiles(t,l,t-1,l-1,o.fallTime,!1);break}}return e}},{key:"fallTiles",value:function(){var e={};e.falled=!1;for(var t=0;t<this.cellArray.length;t++)for(var l=this.cellArray[0].length-1;l>=0;l--)if(this.cellArray[t][l].active&&null==this.cellArray[t][l].tile)for(var r=0;r<=l;r++){var i=l-r;if(this.cellArray[t][i].active&&null!=this.cellArray[t][i].tile){e.falled=!0,e.fallTime=o.fallTime*r,this.swapTiles(t,l,t,i,o.fallTime*r,!1);break}}return e}}]),t}());t.exports.Map=h,cc._RF.pop()},{Cell:"Cell",GameConstants:"GameConstants",TileBaseColor:"TileBaseColor",TileSuperLine:"TileSuperLine"}],Match3Main:[function(e,t,l){"use strict";cc._RF.push(t,"dc7a8T9AVVFhq5HzDvOugTi","Match3Main");e("GameConstants").gameCfg;var r=e("Map").Map;cc.Class({extends:cc.Component,properties:{turnsCounter:cc.Label,targetCounter:cc.Label,winDialog:cc.Sprite,loseDialog:cc.Sprite,busterButton:cc.Button},onLoad:function(){this.map=new r(this.node,this)},busterActive:function(){this.map.activeInputBuster()},restartFull:function(){cc.game.restart()},addTurns:function(){this.map.addTurns()},exitGame:function(){cc.game.end()},update:function(e){}}),cc._RF.pop()},{GameConstants:"GameConstants",Map:"Map"}],TileBaseColor:[function(e,t,l){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"2556bfl88hCHrqswrGSFbsZ","TileBaseColor");var a=function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}}(),o=(e("GameConstants").gameCfg,e("TileSuperLine").TileSuperLine),c=function(e){function t(e,l){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"TileBaseColor"));a.sprite=a.addComponent(cc.Sprite),a.parent=e,a.x=l.x,a.y=l.y,a.tileType="base",a.tileColor=n,a.cell=l,a.cell.tile=a;var o=cc.url.raw("resources/tile"+n+".png"),c=cc.textureCache.addImage(o);return a.sprite.spriteFrame=new cc.SpriteFrame(c),a.anchorX=.5,a.anchorY=.5,a.state="idle",a.isHitedHorizontal=!1,a.isHitedVertical=!1,a}return n(t,cc.Node),a(t,[{key:"hit",value:function(){0==this.tileColor&&this.parent.getTargetTile(),this.parent.removeChild(this,!0),this.cell.tile=null}},{key:"changeColor",value:function(e){var t=cc.url.raw("resources/tile"+e+".png"),l=cc.textureCache.addImage(t);this.sprite.spriteFrame=new cc.SpriteFrame(l),this.tileColor=e}},{key:"convertToHorizontal",value:function(){0==this.tileColor&&this.parent.getTargetTile();new o(this.parent,this.cell,this.tileColor,"horizontal");this.parent.removeChild(this,!0)}},{key:"convertToVertical",value:function(){0==this.tileColor&&this.parent.getTargetTile();new o(this.parent,this.cell,this.tileColor,"vertical");this.parent.removeChild(this,!0)}}]),t}();t.exports.TileBaseColor=c,cc._RF.pop()},{GameConstants:"GameConstants",TileSuperLine:"TileSuperLine"}],TileSuperLine:[function(e,t,l){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"9582cUlWRhNcKWj4zLgbpjR","TileSuperLine");var a=function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}}(),o=(e("GameConstants").gameCfg,function(e){function t(e,l){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"horizontal";r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"TileSuperLine"));o.sprite=o.addComponent(cc.Sprite),o.spriteArrows=o.addComponent(cc.Sprite),o.parent=e,o.x=l.x,o.y=l.y,o.tileType="line",o.tileColor=n,o.cell=l,o.cell.tile=o;var c=cc.url.raw("resources/tile"+n+".png"),s=cc.textureCache.addImage(c);o.sprite.spriteFrame=new cc.SpriteFrame(s);var h=cc.url.raw("resources/lineHor.png");"vertical"==a&&(h=cc.url.raw("resources/lineVer.png"));var u=cc.textureCache.addImage(h);return o.spriteArrows.spriteFrame=new cc.SpriteFrame(u),o.anchorX=.5,o.anchorY=.5,o.state="idle",o.isHitedHorizontal=!1,o.isHitedVertical=!1,o.dirrection=a,o}return n(t,cc.Node),a(t,[{key:"hit",value:function(){0==this.tileColor&&this.parent.getTargetTile();var e=this.cell.posX,t=this.cell.posY,l=this.parent;this.parent.removeChild(this,!0),this.cell.tile=null,l.destroyLine(e,t,this.dirrection,!1)}},{key:"changeColor",value:function(e){var t=cc.url.raw("resources/tile"+e+".png"),l=cc.textureCache.addImage(t);this.sprite.spriteFrame=new cc.SpriteFrame(l),this.tileColor=e}},{key:"convertToHorizontal",value:function(){0==this.tileColor&&this.parent.getTargetTile();new t(this.parent,this.cell,this.tileColor,"horizontal");this.parent.removeChild(this,!0)}},{key:"convertToVertical",value:function(){0==this.tileColor&&this.parent.getTargetTile();new t(this.parent,this.cell,this.tileColor,"vertical");this.parent.removeChild(this,!0)}}]),t}());t.exports.TileSuperLine=o,cc._RF.pop()},{GameConstants:"GameConstants"}]},{},["Cell","GameConstants","Map","Match3Main","TileBaseColor","TileSuperLine"]);